<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hot Reload Example</title>
    <link id="stylesheet" rel="stylesheet" href="dist/bundle.css">
</head>

<body>
    <h1>Hot Reload Test</h1>
    <div class="tabs">
        <button class="tab" onclick="openTab(event, 'tab1')">Tab 1</button>
        <button class="tab" onclick="openTab(event, 'tab2')">Tab 2</button>
        <button class="tab" onclick="openTab(event, 'tab3')">Tab 3</button>
    </div>

    <div id="tab1" class="tabcontent">
        <h3>Tab 1 Content</h3>
        <p>This is the content of tab 1.</p>
    </div>

    <div id="tab2" class="tabcontent">
        <h3>Tab 2 Content</h3>
        <p>This is the content of tab 2.</p>
    </div>

    <div id="tab3" class="tabcontent">
        <h3>Tab 3 Content</h3>
        <p>This is the content of tab 3.</p>
    </div>

    <script src="dist/bundle.js"></script>
    <script>
        const ws = new WebSocket('ws://localhost:8080');
        ws.onmessage = async (event) => {
            if (event.data === 'reload') {
                console.log('Reloading module...');
                // Dynamically import the updated module
                const module = await import('./dist/bundle.js');
                // Optionally, you can call a specific function from the module if needed
                // module.someFunction(); // Uncomment if you have a function to call
                // Reload CSS
                const link = document.querySelector('link[rel="stylesheet"]');
                link.href = link.href.split('?')[0] + '?t=' + new Date().getTime();
            }
        };

        ws.onerror = (error) => console.error('WebSocket error:', error);
    </script>
</body>

</html>